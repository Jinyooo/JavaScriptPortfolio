<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To-do 리스트</title>
    <style>
        li {
            list-style-type: none;
        }
        

    </style>

</head>
<body>
    <h1>투두리스트</h1>
    <form id="todo_form">
        <input type="text" id="todo_input" placeholder="할일을 입력해주세요">
        <input type="button" id="todo_button" value="+">
        <ul id="todo_board">

        </ul>
    </form>
    <P id="count_todo"></P>

    <script>
        // 투두 입력하면 ul 밑에 리스트로 입력값 출력하기
        const todoInput = document.querySelector("#todo_form input");
        const plusButton = document.querySelector("#todo_button");
        const todoBoard = document.querySelector("#todo_board");

        plusButton.addEventListener("click", todoOnboard);
        
        function todoOnboard() {
        // 체크박스, 텍스트, 삭제버튼 생성

            const li = document.createElement("li");

            const checkBox = document.createElement("input");
            checkBox.type="checkbox";

            const text = document.createTextNode(todoInput.value);

            const deleteButton = document.createElement("input");
            deleteButton.type="button";
            deleteButton.value="X";

            todoBoard.appendChild(li);
            li.appendChild(checkBox);
            li.appendChild(text);
            li.appendChild(deleteButton);
        
        // 체크박스 체크하면 스타일 변경 - 회색
            checkBox.addEventListener("click", done);
        
        // 체크하면 오늘 완료한 일 출력
            checkBox.addEventListener("click", countTodo);

        // 삭제버튼 누르면 보드에서 삭제
            deleteButton.addEventListener("click", deleteTodo);

        // 삭제버튼 누르면 오늘 완료한 일에서 -1 
            deleteButton.addEventListener("click", countTodo);
            
            todoInput.value="";
        }

        // 체크되었을 때 스타일 변경하는 함수
        function done(event) {
            const check = event.target;
            //const li = document.querySelector("li");
            if (check.checked) {
                check.parentNode.style.color="lightgrey";
            }
            else {
                check.parentNode.style.color="black";
            }
        }
        // 삭제버튼을 누르면 리스트에서 사라지는 함수
        function deleteTodo(event) {
            const deleteButton = event.target;
            deleteButton.parentNode.remove(); // remove가 자기자신을 없애는건가?
        }

        //체크한 수를 세어주는 함수
        // 모든 리스트.length 중 
        // count = 0 에서 시작
        // 체크 +
        // 체크안함 -
        // 삭제 -
        // 
        // '오늘 한일 몇 개' 문자열 리턴
            
            
        
        function countTodo(event) {
            const check = event.target;
            const length = todoBoard.childNodes.length-1; // n게 : n+1개가 됨
            const print = document.querySelector("#count_todo");

            let count = 0;
            //for ( i=1; i<length; i++) {       
                if  ( check.checked ){
                    count++;
                    
                    
                }
                else if ( !(check.checked) ) {
                    count --;
                    
                }
                else {
                    count --;
                    
                }
                print.textContent = `오늘 완료한 일 ${count}개`;

            //}
            
            
        }
            
            
            // 밑에 출력하기
    
        

    </script>


</body>
</html>